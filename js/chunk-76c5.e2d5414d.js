(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76c5"],{"2d67":function(t,e,a){t.exports=a.p+"img/ali_pay.546a525b.png"},"5dbc":function(t,e,a){var c=a("d3f4"),i=a("8b97").set;t.exports=function(t,e,a){var n,o=e.constructor;return o!==a&&"function"==typeof o&&(n=o.prototype)!==a.prototype&&c(n)&&i&&i(t,n),t}},"64cf":function(t,e,a){"use strict";var c=a("f2ce"),i=a.n(c);i.a},"66e6":function(t,e,a){"use strict";a.d(e,"f",function(){return i}),a.d(e,"e",function(){return n}),a.d(e,"d",function(){return o}),a.d(e,"g",function(){return s}),a.d(e,"a",function(){return r}),a.d(e,"c",function(){return l}),a.d(e,"b",function(){return p});var c=a("b775");function i(){return Object(c["a"])({url:"goods/flow_packet",method:"get"})}function n(){return Object(c["a"])({url:"goods/monthly_packet",method:"get"})}function o(t,e){return Object(c["a"])({url:"order/user_id/".concat(t),method:"post",data:e})}function s(t,e,a){var i="mobile"===a?"&mobile=true":"";return Object(c["a"])({url:"charge/".concat(t,"/pay?order_id=").concat(e).concat(i),method:"get"})}function r(t){return Object(c["a"])({url:"charge/alipay/query?order_id=".concat(t),method:"get"})}function l(t,e,a){return Object(c["a"])({url:"charge/paypal/query?order_id=".concat(t,"&payment_id=").concat(e,"&payer_id=").concat(a),method:"get"})}function p(t,e){return Object(c["a"])({url:"user/user_id/".concat(t,"/checkin"),method:"post",data:e})}},"8b97":function(t,e,a){var c=a("d3f4"),i=a("cb7c"),n=function(t,e){if(i(t),!c(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,c){try{c=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),c(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,a){return n(t,a),e?t.__proto__=a:c(t,a),t}}({},!1):void 0),check:n}},"9a25":function(t,e,a){t.exports=a.p+"img/paypal.413b73aa.jpeg"},"9f54":function(t,e,a){"use strict";a.r(e);var c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"package",style:"mobile"===t.device?{}:{padding:"30px 120px"}},[a("el-dialog",{attrs:{title:t.$t("package.payMethod"),visible:t.payVisible,width:"mobile"===t.device?"80%":"30%","before-close":t.dialogClose},on:{"update:visible":function(e){t.payVisible=e}}},[a("el-radio",{attrs:{label:"alipay"},model:{value:t.paySelect,callback:function(e){t.paySelect=e},expression:"paySelect"}},[a("img",{attrs:{src:t.payImg.ali}})]),a("el-radio",{attrs:{label:"paypal"},model:{value:t.paySelect,callback:function(e){t.paySelect=e},expression:"paySelect"}},[a("img",{attrs:{src:t.payImg.paypal}})]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleSelect}},[t._v(t._s(t.$t("common.ok")))])],1)],1),a("el-dialog",{attrs:{title:t.$t("package.noBuyTitle"),width:"mobile"===t.device?"80%":"30%",visible:t.noSelectVisible},on:{"update:visible":function(e){t.noSelectVisible=e}}},[t._v("\n    "+t._s(t.$t("package.noBuyTip"))+"\n    "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.noSelectVisible=!1}}},[t._v(t._s(t.$t("common.ok")))])],1)]),a("el-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"info","show-icon":"",title:t.$t("package.packageSubTitle"),description:t.$t("package.packageSub")}}),t._l(t.packages,function(e,c){return[a("el-row",{key:e.subject,style:c==t.packages.length-1?{"margin-bottom":"20px",visibility:"hidden"}:{"margin-bottom":"20px"}},[a("el-col",{attrs:{span:24}},[a("el-card",{attrs:{shadow:"never","body-style":"mobile"===t.device?"padding: 20px 10px":""}},["alipay"===t.paySelect?[a("div",{staticClass:"container"},[a("div",{staticClass:"item-desc"},[a("em",{staticClass:"shop-card-em"},[t._v(t._s(e.traffic)+"TB")]),a("span",{staticClass:"shop-card-tips",style:e.original_price-e.price>0?{display:"inline-block"}:{display:"none"}},[t._v("\n                  立减 ￥ "+t._s((e.original_price-e.price).toFixed(2))+"\n                ")]),a("span",{staticClass:"shop-card-txt"},[t._v("永久有效")])]),a("div",{staticClass:"item-price"},[a("span",{staticClass:"price"},[a("span",[t._v("￥")]),a("em",[t._v(t._s(e.price))]),e.price!==e.original_price?a("s",[t._v("￥"+t._s(e.original_price))]):t._e()])]),a("div",{staticClass:"count"},[a("el-input-number",{attrs:{size:"mini",min:0},on:{change:function(a){return t.selectCountChange(a,e)}},model:{value:t.selectPackage.cn[c].amount,callback:function(e){t.$set(t.selectPackage.cn[c],"amount",e)},expression:"selectPackage.cn[index].amount"}})],1)])]:[a("div",{staticClass:"container"},[a("div",{staticClass:"item-desc"},[a("em",{staticClass:"shop-card-em"},[t._v(t._s(e.traffic)+"TB")]),a("span",{staticClass:"shop-card-tips",style:e.original_price-e.price>0?{display:"inline-block"}:{display:"none"}},[t._v("\n                  "+t._s(((e.original_price-e.price)/e.original_price*100).toFixed(1))+"% off\n                ")]),a("span",{staticClass:"shop-card-txt"})]),a("div",{staticClass:"item-price"},[a("span",{staticClass:"price"},[a("span",[t._v("$")]),a("em",[t._v(t._s(e.price))]),e.price!==e.original_price?a("s",[t._v("$"+t._s(e.original_price))]):t._e()])]),a("div",{staticClass:"count"},[a("el-input-number",{attrs:{size:"mini",min:0},on:{change:function(a){return t.selectCountChange(a,e)}},model:{value:t.selectPackage.en[c].amount,callback:function(e){t.$set(t.selectPackage.en[c],"amount",e)},expression:"selectPackage.en[index].amount"}})],1)])]],2)],1)],1)]}),a("div",{staticClass:"create-order"},["alipay"===t.paySelect?a("div",[a("div",{staticClass:"buy"},[a("div",{staticClass:"tip"},[t._v("\n          总计费用：\n        ")]),a("div",{staticClass:"total-price"},[a("em",[t._v(t._s(t.totalPrice)+" "),a("span",{staticClass:"unit"},[t._v("RMB")])])])]),a("el-button",{attrs:{type:"warning"},on:{click:t.handleBuyClick}},[t._v("创建订单")])],1):a("div",[a("div",{staticClass:"buy"},[a("div",{staticClass:"tip"},[t._v("\n          Total Amount:\n        ")]),a("div",{staticClass:"total-price"},[a("em",[t._v(t._s(t.totalPrice)+" "),a("span",{staticClass:"unit"},[t._v("USD")])])])]),a("el-button",{attrs:{type:"warning"},on:{click:t.handleBuyClick}},[t._v("Create Order")])],1)])],2)},i=[],n=(a("c5f6"),a("ac6a"),a("8afe")),o=a("c93e"),s=a("66e6"),r=a("2f62"),l=a("5f87"),p={name:"Package",data:function(){return{payVisible:!0,noSelectVisible:!1,paySelect:"alipay",payImg:{ali:a("2d67"),paypal:a("9a25")},totalPrice:0,packages:[],selectPackage:{cn:[],en:[]}}},computed:Object(o["a"])({},Object(r["b"])(["device"])),methods:{getPackageData:function(){var t=this;Object(s["f"])().then(function(e){"alipay"===t.paySelect?(t.packages=Object(n["a"])(e.data.list_cn),t.packages.push(Object(o["a"])({},e.data.list_cn[0],{subject:"hide"})),t.packages.forEach(function(e){t.selectPackage.cn.push(Object(o["a"])({},e,{amount:0}))})):(t.packages=Object(n["a"])(e.data.list_en),t.packages.push(Object(o["a"])({},e.data.list_en[0],{subject:"hide"})),t.packages.forEach(function(e){t.selectPackage.en.push(Object(o["a"])({},e,{amount:0}))}))}).catch(function(t){console.log(t)})},dialogClose:function(){this.$router.push("/")},selectCountChange:function(t,e){this.getTotalPrice()},handleSelect:function(){this.payVisible=!1,this.getPackageData()},getTotalPrice:function(){var t=0;this.selectPackage.cn.length>0?this.selectPackage.cn.forEach(function(e){e.amount>0&&(t+=e.price*e.amount)}):this.selectPackage.en.forEach(function(e){e.amount>0&&(t+=e.price*e.amount)}),this.totalPrice=t.toFixed(2)},handleCreateOrder:function(){var t=this,e={price:Number(this.totalPrice),payment:this.paySelect,goods:[],goods_type:"alipay"===this.paySelect?"flow_packet_cn":"flow_packet_en"},a="alipay"===this.paySelect?this.selectPackage.cn:this.selectPackage.en;e.goods=a.filter(function(t){return t.amount>0}),Object(s["d"])(Object(l["a"])(),e).then(function(a){t.$router.push({name:"OrderDetail",query:{payMethod:t.paySelect,orderID:a.data.order_id,totalPrice:t.totalPrice,buyData:JSON.stringify(e.goods)}})}).catch(function(t){console.log(t)})},handleBuyClick:function(){var t=this;this.totalPrice<=0?this.noSelectVisible=!0:this.$messageBox.confirm(this.$t("package.comfirmCreate"),{distinguishCancelAndClose:!0,confirmButtonText:this.$t("common.ok"),cancelButtonText:this.$t("common.cancel")}).then(function(){t.handleCreateOrder()})}}},u=p,d=(a("64cf"),a("2877")),f=Object(d["a"])(u,c,i,!1,null,"fc80bed8",null);f.options.__file="package.vue";e["default"]=f.exports},aa77:function(t,e,a){var c=a("5ca1"),i=a("be13"),n=a("79e5"),o=a("fdef"),s="["+o+"]",r="​",l=RegExp("^"+s+s+"*"),p=RegExp(s+s+"*$"),u=function(t,e,a){var i={},s=n(function(){return!!o[t]()||r[t]()!=r}),l=i[t]=s?e(d):o[t];a&&(i[a]=l),c(c.P+c.F*s,"String",i)},d=u.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(p,"")),t};t.exports=u},c5f6:function(t,e,a){"use strict";var c=a("7726"),i=a("69a8"),n=a("2d95"),o=a("5dbc"),s=a("6a99"),r=a("79e5"),l=a("9093").f,p=a("11e9").f,u=a("86cc").f,d=a("aa77").trim,f="Number",g=c[f],h=g,m=g.prototype,_=n(a("2aeb")(m))==f,b="trim"in String.prototype,y=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=b?e.trim():d(e,3);var a,c,i,n=e.charCodeAt(0);if(43===n||45===n){if(a=e.charCodeAt(2),88===a||120===a)return NaN}else if(48===n){switch(e.charCodeAt(1)){case 66:case 98:c=2,i=49;break;case 79:case 111:c=8,i=55;break;default:return+e}for(var o,r=e.slice(2),l=0,p=r.length;l<p;l++)if(o=r.charCodeAt(l),o<48||o>i)return NaN;return parseInt(r,c)}}return+e};if(!g(" 0o1")||!g("0b1")||g("+0x1")){g=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof g&&(_?r(function(){m.valueOf.call(a)}):n(a)!=f)?o(new h(y(e)),a,g):y(e)};for(var v,k=a("9e1e")?l(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;k.length>C;C++)i(h,v=k[C])&&!i(g,v)&&u(g,v,p(h,v));g.prototype=m,m.constructor=g,a("2aba")(c,f,g)}},f2ce:function(t,e,a){},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-76c5.e2d5414d.js.map