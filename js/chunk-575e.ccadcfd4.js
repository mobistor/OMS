(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-575e"],{"01a5":function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticStyle:{display:"inline-block","text-align":"left",width:"100%"}},[e("el-input",{staticStyle:{width:"55%"},attrs:{placeholder:t.currentDomain.domain?t.currentDomain.domain:t.$t("domainTable.none"),disabled:!0}}),e("el-button",{attrs:{type:"primary",plain:""},on:{click:function(a){t.selectDomainVisible=!0}}},[t._v("\n    "+t._s(t.$t("dashboard.switchDomain"))+"\n  ")]),e("el-dialog",{attrs:{title:t.$t("dashboard.switchDomain"),visible:t.selectDomainVisible,width:"mobile"===t.device?"80%":"30%"},on:{"update:visible":function(a){t.selectDomainVisible=a}}},[e("el-select",{staticStyle:{width:"80%"},attrs:{placeholder:t.$t("domainTable.select")},model:{value:t.selectValue,callback:function(a){t.selectValue=a},expression:"selectValue"}},[t._l(t.validDomain,function(a){return[1===a.isValid?e("el-option",{key:a.domain,attrs:{label:a.domain,value:a.domain}}):t._e()]})],2),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.selectDomainVisible=!1}}},[t._v(t._s(t.$t("common.cancel")))]),e("el-button",{attrs:{type:"primary"},on:{click:t.handleSelect}},[t._v(t._s(t.$t("common.ok")))])],1)],1)],1)},n=[],s=(e("ac6a"),e("c93e")),o=e("2f62"),c=e("4360"),r={name:"SwitchDomain",props:{pcWidth:{type:String,default:"30%"},mobileWidth:{type:String,default:"60%"},finishSelect:{type:Function,required:!1}},data:function(){return{selectValue:"",validDomain:[],selectDomainVisible:!1}},computed:Object(s["a"])({},Object(o["b"])(["device","currentDomain","userValidDomain"])),watch:{userValidDomain:function(t){t&&(this.validDomain=JSON.parse(t))}},mounted:function(){this.userValidDomain&&(this.validDomain=JSON.parse(this.userValidDomain))},methods:{handleSelect:function(){var t=this;this.selectValue&&(this.validDomain.forEach(function(a){a.domain===t.selectValue&&c["a"].dispatch("setCurrentDomain",a).then(function(){t.selectDomainVisible=!1})}),this.finishSelect&&this.finishSelect(this.currentDomain.uid,this.currentDomain.id))}}},l=r,d=e("2877"),u=Object(d["a"])(l,i,n,!1,null,null,null);u.options.__file="index.vue";a["a"]=u.exports},"14b9":function(t,a,e){var i=e("5ca1");i(i.P,"String",{repeat:e("9744")})},1643:function(t,a,e){},1765:function(t,a,e){},3807:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.checkResultLoading,expression:"checkResultLoading"}],attrs:{"element-loading-text":t.$t("package.checkResultLoadingTip")}},[e("el-row",{staticStyle:{"text-align":"left",margin:"20px 0"}},[t.showDomain?[e("el-col",{attrs:{xs:20,sm:12,lg:8}},[e("SwitchDomain",{attrs:{finishSelect:t.handleSwitchDomain}})],1)]:t._e(),e("el-col",{attrs:{xs:7,sm:4,lg:2}},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.checkinLoading,expression:"checkinLoading"}],attrs:{type:"success"},on:{click:t.handleCheckin}},[t._v(t._s(t.$t("dashboard.checkin")))])],1)],2),e("el-row",{staticClass:"panel-group",attrs:{gutter:20}},[e("el-col",{staticClass:"card-panel-col",attrs:{xs:24,sm:12,lg:6}},[e("div",{staticClass:"card-panel"},[e("div",{staticClass:"tip"},[e("PointTip",{attrs:{content:t.$t("dashboard.onlinesTip")}})],1),e("div",{staticClass:"card-panel-description"},[e("span",{staticClass:"card-panel-num"},[t._v(t._s(t._f("positive")(t.statis.online)))]),e("div",{staticClass:"card-panel-text"},[t._v(t._s(t.$t("dashboard.online")))])])])]),e("el-col",{staticClass:"card-panel-col",attrs:{xs:24,sm:12,lg:6}},[e("div",{staticClass:"card-panel"},[e("div",{staticClass:"tip"},[e("PointTip",{attrs:{content:t.$t("dashboard.p2pTip")}})],1),e("div",{staticClass:"card-panel-description"},[e("span",{staticClass:"card-panel-num"},[t._v(t._s(t.statis.traffic_p2p.num))]),e("div",{staticClass:"card-panel-text"},[t._v(t._s(t.$t("dashboard.p2pTraffic"))+" ("+t._s(t.statis.traffic_p2p.unit)+")")])])])]),e("el-col",{staticClass:"card-panel-col",attrs:{xs:24,sm:12,lg:6}},[e("div",{staticClass:"card-panel"},[e("div",{staticClass:"tip"},[e("PointTip",{attrs:{content:t.$t("dashboard.freeTip")}})],1),e("div",{staticClass:"card-panel-description"},[e("span",{staticClass:"card-panel-num"},[t._v(t._s(t.statis.whiteList?"+∞":t.statis.flow.free.num))]),e("div",{staticClass:"card-panel-text"},[t._v(t._s(t.$t("dashboard.free"))+" ("+t._s(t.statis.flow.free.unit)+")")])])])]),t.statis.flow.remain>0?e("el-col",{staticClass:"card-panel-col",attrs:{xs:24,sm:12,lg:6}},[e("div",{staticClass:"card-panel"},[e("div",{staticClass:"tip"},[e("PointTip",{attrs:{content:t.$t("dashboard.remainTip")}})],1),e("div",{staticClass:"card-panel-description"},[e("span",{staticClass:"card-panel-num",style:t.statis.flow.totalRemain>104857600?"color: green":"color: red"},[t._v(t._s("TB"===t.formatTraffic(t.statis.flow.remain).unit&&t.formatTraffic(t.statis.flow.remain).num>=99999?"+∞":t.formatTraffic(t.statis.flow.remain).num))]),e("div",{staticClass:"card-panel-text"},[t._v(t._s(t.$t("dashboard.remain"))+" ("+t._s(t.formatTraffic(t.statis.flow.remain).unit)+")\n            ")])])])]):t._e(),t.statis.type.product_type>0?e("el-col",{staticClass:"card-panel-col",attrs:{xs:24,sm:12,lg:6}},[e("div",{staticClass:"card-panel"},[e("div",{staticClass:"tip"},[e("PointTip",{attrs:{content:t.$t("dashboard.remainTip")}})],1),e("div",{staticClass:"card-panel-description"},[e("span",{staticClass:"card-panel-num",style:t.statis.flow.daily_remain>104857600?"color: green":"color: red"},[t._v(t._s(t.formatTraffic(t.statis.flow.daily_remain).num))]),e("div",{staticClass:"card-panel-text"},[t._v(t._s(t.$t("dashboard.monthlyRemain"))+" ("+t._s(t.formatTraffic(t.statis.flow.daily_remain).unit)+")\n            "),e("div",[t._v(t._s(t.formatType()))])])])])]):t._e(),e("el-col",{staticClass:"card-panel-col",attrs:{xs:24,sm:12,lg:6}},[e("div",{staticClass:"card-panel"},[e("div",{staticClass:"tip"},[e("PointTip",{attrs:{content:t.$t("dashboard.viewsTip")}})],1),e("div",{staticClass:"card-panel-description"},[e("span",{staticClass:"card-panel-num"},[t._v(t._s(t.statis.frequency_day))]),e("div",{staticClass:"card-panel-text"},[t._v(t._s(t.$t("dashboard.serveNum")))])])])]),e("el-col",{staticClass:"card-panel-col",attrs:{xs:24,sm:12,lg:6}},[e("div",{staticClass:"card-panel"},[e("div",{staticClass:"card-panel-description"},[e("span",{staticClass:"card-panel-num"},[t._v(t._s(t.statis.num_max))]),e("div",{staticClass:"card-panel-text"},[t._v(t._s(t.$t("dashboard.maxOnlineNum")))])])])])],1),e("Dis",{attrs:{data:t.disData}}),e("NoBindTip")],1)},n=[],s=(e("14b9"),e("c93e")),o=(e("cadf"),e("551c"),e("097d"),e("4360")),c=e("2f62"),r=e("c1df"),l=e.n(r),d=e("8595"),u=e("66e6"),m=e("a877"),p=e("6be8"),f=e("01a5"),h=e("9a09"),v=e("9f52"),b=e("2774"),_=void 0,g={name:"LiveData",components:{Dis:b["a"],NoBindTip:h["a"],SwitchDomain:f["a"],PointTip:v["a"]},data:function(){return{checkinLoading:!1,checkResultLoading:!1,remainTrafficFlag:!0,showDomain:!1,statis:{whiteList:!1,type:{product_type:0,time:""},online:0,traffic_p2p:{num:0,unit:"KB"},frequency_day:0,num_max:0,flow:{remain:0,daily_remain:0,totalRemain:0,free:{num:0,unit:"KB"}}},disData:{versionData:[],tagData:[],deviceData:[],liveData:[],netTypeData:[]}}},computed:Object(s["a"])({},Object(c["b"])(["currentDomain","device","userValidDomain"])),mounted:function(){void 0!==this.$route.params.id&&void 0!==this.$route.params.uid?(this.loopGetData(this.$route.params.uid,this.$route.params.id,this.$route.params.hostId),this.getDisData(this.$route.params.uid,this.$route.params.id,this.$route.params.hostId),this.showDomain=!1):(this.getUserDomain(),this.checkPayResult(),this.showDomain=!0)},beforeDestroy:function(){clearInterval(_)},methods:{formatTraffic:p["c"],formatType:function(){if(0===this.statis.type.product_type)return"";var t=this.statis.type.time?l()(this.statis.type.time).format("YYYY-MM-DD"):"";return this.$t("package.monthly")+"".concat(t)},getData:function(t,a,e){var i=this;Object(d["c"])(t,a,e).then(function(t){var a=t.data;i.statis.online=a.num_rt,i.statis.traffic_p2p=Object(p["c"])(a.traffic_p2p_day),i.statis.frequency_day=a.api_frequency_day,i.statis.num_max=a.num_max,i.statis.flow.remain=a.flow.remain,i.statis.flow.daily_remain=a.flow.daily_remain,i.statis.flow.totalRemain=a.flow.daily_remain+a.flow.remain,i.statis.flow.free=Object(p["c"])(a.flow.free),i.statis.whiteList=a.whitelist,i.statis.type.product_type=a.flow.product_type,i.statis.type.time=a.flow.duetime,0===a.flow.free&&0===a.flow.remain&&0===a.flow.daily_remain&&i.remainTrafficFlag&&void 0===Object(p["d"])().payment&&!a.whitelist&&(i.$messageBox.confirm(i.$t("dashboard.trafficUseOut"),{distinguishCancelAndClose:!0,confirmButtonText:i.$t("package.buyFlow"),cancelButtonText:i.$t("package.buyMonthly")}).then(function(){i.$router.push("/user/package")}).catch(function(t){"cancel"===t?i.$router.push("/user/monthly_package"):console.log("-")}),i.remainTrafficFlag=!1)}).catch(function(t){console.log(t)})},getDisData:function(t,a,e){var i=this;Object(d["b"])(t,a,"version",e).then(function(t){t.data&&(i.disData.versionData=Object(p["b"])(t.data))}),Object(d["b"])(t,a,"tag",e).then(function(t){t.data&&(i.disData.tagData=Object(p["b"])(t.data))}),Object(d["b"])(t,a,"device",e).then(function(t){t.data&&(i.disData.deviceData=Object(p["b"])(t.data))}),Object(d["b"])(t,a,"live",e).then(function(t){t.data&&(i.disData.liveData=Object(p["b"])(t.data))}),Object(d["b"])(t,a,"netType",e).then(function(t){t.data&&(i.disData.netTypeData=Object(p["b"])(t.data))})},loopGetData:function(t,a,e){var i=this;i.getData(t,a,e),_=setInterval(function(){i.getData(t,a,e)},2e4)},handleCheckin:function(){var t=this;void 0!==this.currentDomain.id?(this.checkinLoading=!0,Object(u["b"])(this.currentDomain.uid,{user_id:this.currentDomain.uid}).then(function(a){a.data.repeat?t.$messageBox.alert(t.$t("dashboard.haveChecked"),{confirmButtonText:t.$t("common.ok")}):(t.$messageBox.confirm(t.$t("dashboard.checkinSuccess"),{type:"success",confirmButtonText:t.$t("common.ok"),showCancelButton:!1}),t.getData(t.currentDomain.uid,t.currentDomain.id)),t.checkinLoading=!1}).catch(function(a){t.$messageBox.confirm(t.$t("dashboard.checkinFail"),{type:"error",confirmButtonText:t.$t("common.ok"),showCancelButton:!1}),t.checkinLoading=!1,console.log(a)})):this.$messageBox.confirm(this.$t("dashboard.tip"),{confirmButtonText:this.$t("common.ok"),cancelButtonText:this.$t("common.cancel")}).then(function(){t.$router.push("/user/domain")}).catch(function(){})},handleSwitchDomain:function(t,a){clearInterval(_),this.getDisData(t,a),this.loopGetData(t,a)},checkPayResult:function(){var t=this,a=Object(p["d"])();if(a.payment)switch(this.checkResultLoading=!0,a.payment){case"alipay":Object(u["a"])(a.out_trade_no).then(function(a){t.checkResultLoading=!1,a.data.is_payed?t.$messageBox.confirm(t.$t("package.paySuccess"),{type:"success",confirmButtonText:t.$t("common.ok"),showCancelButton:!1}):t.$messageBox.confirm(t.$t("package.payFail"),{type:"error",confirmButtonText:t.$t("common.ok"),showCancelButton:!1})}).catch(function(a){t.checkResultLoading=!1,console.log(a)});break;case"paypal":a.cancel?(this.checkResultLoading=!1,this.$messageBox.confirm(this.$t("package.payFail"),{type:"error",confirmButtonText:this.$t("common.ok"),showCancelButton:!1})):Object(u["c"])(a.orderId,a.paymentId,a.PayerID).then(function(a){a.data.is_payed?(t.checkResultLoading=!1,t.$messageBox.confirm(t.$t("package.paySuccess"),{type:"success",confirmButtonText:t.$t("common.ok"),showCancelButton:!1})):t.$messageBox.confirm(t.$t("package.payFail"),{type:"error",confirmButtonText:t.$t("common.ok"),showCancelButton:!1})}).catch(function(a){t.checkResultLoading=!1,console.log(a)});break;default:break}},getUserDomain:function(){var t=this;Object(m["i"])(1,200).then(function(a){if(a.data){var e=!1;if(t.currentDomain.id){for(var i=0;i<a.data.length;i++)if(1===a.data[i].isValid){e=!0;break}}else for(var n=0;n<a.data.length;n++)if(1===a.data[n].isValid){o["a"].dispatch("setDomain",a.data),o["a"].dispatch("setCurrentDomain",a.data[n]),e=!0;break}if(e){var s=a.data.filter(function(t){return 1===t.isValid});o["a"].dispatch("setValidDomain",s),t.loopGetData(t.currentDomain.uid,t.currentDomain.id),t.getDisData(t.currentDomain.uid,t.currentDomain.id)}}}).catch(function(t){console.log(t)})}}},y=g,D=(e("942b"),e("2877")),$=Object(D["a"])(y,i,n,!1,null,"03aeacce",null);$.options.__file="LiveData.vue";a["default"]=$.exports},5179:function(t,a,e){"use strict";var i=e("1643"),n=e.n(i);n.a},"66e6":function(t,a,e){"use strict";e.d(a,"f",function(){return n}),e.d(a,"e",function(){return s}),e.d(a,"d",function(){return o}),e.d(a,"g",function(){return c}),e.d(a,"a",function(){return r}),e.d(a,"c",function(){return l}),e.d(a,"b",function(){return d});var i=e("b775");function n(){return Object(i["a"])({url:"goods/flow_packet",method:"get"})}function s(){return Object(i["a"])({url:"goods/monthly_packet",method:"get"})}function o(t,a){return Object(i["a"])({url:"order/user_id/".concat(t),method:"post",data:a})}function c(t,a,e){var n="mobile"===e?"&mobile=true":"";return Object(i["a"])({url:"charge/".concat(t,"/pay?order_id=").concat(a).concat(n),method:"get"})}function r(t){return Object(i["a"])({url:"charge/alipay/query?order_id=".concat(t),method:"get"})}function l(t,a,e){return Object(i["a"])({url:"charge/paypal/query?order_id=".concat(t,"&payment_id=").concat(a,"&payer_id=").concat(e),method:"get"})}function d(t,a){return Object(i["a"])({url:"user/user_id/".concat(t,"/checkin"),method:"post",data:a})}},8595:function(t,a,e){"use strict";e.d(a,"c",function(){return n}),e.d(a,"b",function(){return s}),e.d(a,"a",function(){return o});e("cadf"),e("551c"),e("097d");var i=e("b775");function n(t,a,e){var n="user/user_id/".concat(t,"/domain/domain_id/").concat(a);return e&&(n="".concat(n,"?host_id=").concat(e)),Object(i["a"])({url:n,method:"get"})}function s(t,a,e,n){var s="user/user_id/".concat(t,"/domain/domain_id/").concat(a,"/num?type=").concat(e);return n&&(s="".concat(s,"&host_id=").concat(n)),Object(i["a"])({url:s,method:"get"})}function o(t,a,e){return Object(i["a"])({url:"user/user_id/".concat(t,"/domain/domain_id/").concat(a,"/num?type=").concat(e),method:"get"})}},"942b":function(t,a,e){"use strict";var i=e("1765"),n=e.n(i);n.a},9744:function(t,a,e){"use strict";var i=e("4588"),n=e("be13");t.exports=function(t){var a=String(n(this)),e="",s=i(t);if(s<0||s==1/0)throw RangeError("Count can't be negative");for(;s>0;(s>>>=1)&&(a+=a))1&s&&(e+=a);return e}},"9a09":function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-dialog",{attrs:{visible:t.tipVisible,width:"mobile"===t.device?"80%":"30%"},on:{"update:visible":function(a){t.tipVisible=a}}},[e("span",[t._v(t._s(t.$t("dashboard.tip")))]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.tipVisible=!1}}},[t._v(t._s(t.$t("common.cancel")))]),e("el-button",{attrs:{type:"primary"},on:{click:t.handleGoApp}},[t._v(t._s(t.$t("dashboard.goApp")))]),e("el-button",{attrs:{type:"primary"},on:{click:t.handlePush}},[t._v(t._s(t.$t("dashboard.goBind")))])],1)])},n=[],s=e("c93e"),o=(e("cadf"),e("551c"),e("097d"),e("2f62")),c={name:"NoBindTip",data:function(){return{tipVisible:!1}},watch:{currentDomain:function(t){void 0!==t.id&&(this.tipVisible=!1)}},mounted:function(){var t=this;setTimeout(function(){t.roles.indexOf("user")>-1&&void 0===t.currentDomain.id&&(t.tipVisible=!0)},1e3)},computed:Object(s["a"])({},Object(o["b"])(["device","currentDomain","roles"])),methods:{handlePush:function(){this.tipVisible=!1,this.$router.push("/user/domain")},handleGoApp:function(){this.tipVisible=!1,this.$router.push("/app/app")}}},r=c,l=e("2877"),d=Object(l["a"])(r,i,n,!1,null,null,null);d.options.__file="index.vue";a["a"]=d.exports},"9f52":function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-tooltip",{attrs:{effect:"light",placement:"top-start"}},[e("div",{staticClass:"content",attrs:{slot:"content"},domProps:{innerHTML:t._s(t.content)},slot:"content"}),e("i",{staticClass:"el-icon-question",staticStyle:{color:"#337ab7"}})])},n=[],s={name:"PointTip",props:{content:{type:String,required:!0}}},o=s,c=(e("5179"),e("2877")),r=Object(c["a"])(o,i,n,!1,null,"699d195c",null);r.options.__file="index.vue";a["a"]=r.exports}}]);
//# sourceMappingURL=chunk-575e.ccadcfd4.js.map