(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-97ee"],{"01a5":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{display:"inline-block","text-align":"left",width:"100%"}},[a("el-input",{staticStyle:{width:"55%"},attrs:{placeholder:e.currentDomain.domain?e.currentDomain.domain:e.$t("domainTable.none"),disabled:!0}}),a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.selectDomainVisible=!0}}},[e._v("\n    "+e._s(e.$t("dashboard.switchDomain"))+"\n  ")]),a("el-dialog",{attrs:{title:e.$t("dashboard.switchDomain"),visible:e.selectDomainVisible,width:"mobile"===e.device?"80%":"30%"},on:{"update:visible":function(t){e.selectDomainVisible=t}}},[a("el-select",{staticStyle:{width:"80%"},attrs:{placeholder:e.$t("domainTable.select")},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},[e._l(e.validDomain,function(t){return[1===t.isValid?a("el-option",{key:t.domain,attrs:{label:t.domain,value:t.domain}}):e._e()]})],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.selectDomainVisible=!1}}},[e._v(e._s(e.$t("common.cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSelect}},[e._v(e._s(e.$t("common.ok")))])],1)],1)],1)},n=[],o=(a("ac6a"),a("c93e")),l=a("2f62"),c=a("4360"),r={name:"SwitchDomain",props:{pcWidth:{type:String,default:"30%"},mobileWidth:{type:String,default:"60%"},finishSelect:{type:Function,required:!1}},data:function(){return{selectValue:"",validDomain:[],selectDomainVisible:!1}},computed:Object(o["a"])({},Object(l["b"])(["device","currentDomain","userValidDomain"])),watch:{userValidDomain:function(e){e&&(this.validDomain=JSON.parse(e))}},mounted:function(){this.userValidDomain&&(this.validDomain=JSON.parse(this.userValidDomain))},methods:{handleSelect:function(){var e=this;this.selectValue&&(this.validDomain.forEach(function(t){t.domain===e.selectValue&&c["a"].dispatch("setCurrentDomain",t).then(function(){e.selectDomainVisible=!1})}),this.finishSelect&&this.finishSelect(this.currentDomain.uid,this.currentDomain.id))}}},s=r,d=a("2877"),u=Object(d["a"])(s,i,n,!1,null,null,null);u.options.__file="index.vue";t["a"]=u.exports},"5ca9":function(e,t,a){},a877:function(e,t,a){"use strict";a.d(t,"h",function(){return o}),a.d(t,"f",function(){return l}),a.d(t,"g",function(){return c}),a.d(t,"b",function(){return r}),a.d(t,"m",function(){return s}),a.d(t,"k",function(){return d}),a.d(t,"l",function(){return u}),a.d(t,"j",function(){return m}),a.d(t,"i",function(){return b}),a.d(t,"a",function(){return f}),a.d(t,"c",function(){return h}),a.d(t,"d",function(){return p}),a.d(t,"e",function(){return v});a("7f7f"),a("ac6a"),a("cadf"),a("551c"),a("097d");var i=a("b775"),n=a("5f87");function o(){return Object(i["a"])({url:"host/num?ts=".concat(((new Date).getTime()/1e3).toFixed()-1800),method:"get"})}function l(e,t,a,n){var o="host?page=".concat(e,"&page_size=").concat(t,"&order=").concat(a);return n.forEach(function(e){e.value&&(o+="&".concat(e.name,"=").concat(e.value))}),Object(i["a"])({url:o,method:"get"})}function c(e,t){var a="host/review?page=".concat(e,"&page_size=").concat(t);return Object(i["a"])({url:a,method:"get"})}function r(e){return Object(i["a"])({url:"/host/block",method:"post",data:e})}function s(e){return Object(i["a"])({url:"/host/whitelist",method:"post",data:e})}function d(e){return Object(i["a"])({url:"/host/review",method:"post",data:e})}function u(e){return Object(i["a"])({url:"host/search?keywords=".concat(e),method:"get"})}function m(e,t,a){return Object(i["a"])({url:"user?page=".concat(e,"&page_size=").concat(t,"&order=").concat(a),method:"get"})}function b(e,t,a){var o="user/user_id/".concat(Object(n["a"])(),"/domain?page=").concat(e,"&page_size=").concat(t);for(var l in a)a[l]&&(o="".concat(o,"&").concat(l,"=1"));return Object(i["a"])({url:o,method:"get"})}function f(e){return Object(i["a"])({url:"user/user_id/".concat(Object(n["a"])(),"/domain"),method:"post",data:e})}function h(e){return Object(i["a"])({url:"user/user_id/".concat(Object(n["a"])(),"/domain/domain_id/").concat(e),method:"post"})}function p(e){return Object(i["a"])({url:"user/user_id/".concat(Object(n["a"])(),"/domain/domain_id/").concat(e),method:"delete"})}function v(){return Object(i["a"])({url:"user/admin",method:"get"})}},b50b:function(e,t,a){"use strict";var i=a("5ca9"),n=a.n(i);n.a},ddec:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Table")},n=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-alert",{attrs:{title:e.$t("domainTable.title"),description:e.$t("domainTable.desc"),type:"info","show-icon":""}}),a("el-row",{staticStyle:{"text-align":"left"}},[a("el-col",{staticStyle:{margin:"10px 0"},attrs:{xs:24,sm:12,lg:8}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v(e._s(e.$t("domainTable.bindDomain")))])],1),a("el-col",{staticStyle:{margin:"10px 0"},attrs:{xs:24,sm:12,lg:12}},[a("SwitchDomain",{attrs:{mobileWidth:"25%"}})],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{border:"",data:e.tableData}},[a("el-table-column",{attrs:{align:"center",prop:"domain",label:e.$t("domainTable.domain")}}),a("el-table-column",{attrs:{align:"center",label:e.$t("domainTable.status")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{style:t.row.blocked||t.row.reviewing?"color: red":""},[e._v("\n          "+e._s(e.formatterStatus(t.row))+"\n        ")])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"text",label:"text"}}),a("el-table-column",{attrs:{label:e.$t("domainTable.operation"),align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[[1!==t.row.isValid?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.handleCheck(t.row)}}},[e._v(e._s(e.$t("domainTable.certification")))]):e._e(),a("el-popover",{ref:"popover-"+t.row.id,style:"mobile"===e.device?"":"margin-left: 10px",attrs:{trigger:"manual",placement:"top",width:"160"}},[a("p",[e._v(e._s(e.$t("domainTable.tip")))]),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.pClose(t.row.id)}}},[e._v(e._s(e.$t("common.cancel")))]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.handleDeleteDomain(t.row)}}},[e._v(e._s(e.$t("common.ok")))])],1),a("el-button",{attrs:{slot:"reference",type:"danger",size:"mini"},on:{click:function(a){e.pShow(t.row.id)}},slot:"reference"},[e._v(e._s(e.$t("domainTable.delete")))])],1)]]}}])})],1),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{layout:"sizes, prev, pager, next","page-sizes":[10,20,50,100],"page-size":e.tableParam.pageSize,"current-page":e.tableParam.page},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:e.$t("domainTable.verifyDomain"),visible:e.checkDialogVisible,width:"mobile"===e.device?"90%":"30%"},on:{"update:visible":function(t){e.checkDialogVisible=t}}},[a("el-alert",{staticStyle:{"text-align":"left"},attrs:{title:"",type:"warning",description:e.$t("domainTable.certificationTip"),closable:!1}}),a("el-form",[a("el-form-item",{attrs:{label:e.$t("domainTable.userVerifyDomain.verifyWay")}},[a("el-radio",{attrs:{label:"dns"},model:{value:e.checkSelect,callback:function(t){e.checkSelect=t},expression:"checkSelect"}},[e._v(e._s(e.$t("domainTable.userVerifyDomain.DNSVerify")))]),a("el-radio",{attrs:{label:"file"},model:{value:e.checkSelect,callback:function(t){e.checkSelect=t},expression:"checkSelect"}},[e._v(e._s(e.$t("domainTable.userVerifyDomain.fileVerify")))])],1)],1),"dns"===e.checkSelect?[a("div",[a("ol",[a("li",[a("div",{staticClass:"pv-content"},[a("h4",[e._v(e._s(e.$t("domainTable.userVerifyDomain.verifyTipHead"))+e._s(e.checkDomainData.domain)+e._s(e.$t("domainTable.userVerifyDomain.verifyTipEnd")))]),a("h4",[e._v(e._s(e.checkDomainData.text))])])]),a("li",[a("div",{staticClass:"pv-content pv-content-last"},[a("h4",[e._v(e._s(e.$t("domainTable.doneTip")))])])])])])]:[a("div",[a("ol",[a("li",[a("div",{staticClass:"pv-content"},[a("h4",[e._v(e._s(e.$t("domainTable.userVerifyDomain.downloadFileHead"))),a("a",{on:{click:e.saveFile}},[e._v(e._s(e.$t("domainTable.userVerifyDomain.downloadFileEnd")))])])])]),a("li",[a("div",{staticClass:"pv-content"},[a("h4",[e._v(e._s(e.$t("domainTable.userVerifyDomain.uploadFile"))+"http://"+e._s(e.checkDomainData.domain)+"/ or https://"+e._s(e.checkDomainData.domain)+"/")]),a("h4",[e._v(e._s(e.$t("domainTable.userVerifyDomain.fileName")))])])]),a("li",[a("div",{staticClass:"pv-content"},[a("h4",[e._v(e._s(e.$t("domainTable.userVerifyDomain.navVisitHead"))+"http(s)://"+e._s(e.checkDomainData.domain)+"/auth.txt"+e._s(e.$t("domainTable.userVerifyDomain.navVisitEnd")))])])]),a("li",[a("div",{staticClass:"pv-content pv-content-last"},[a("h4",[e._v(e._s(e.$t("domainTable.doneTip")))])])])])])],a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.checkDialogVisible=!1}}},[e._v(e._s(e.$t("domainTable.verifyLater")))]),a("el-button",{attrs:{loading:e.checkDomainLoading,type:"primary"},on:{click:e.handleCheckDomain}},[e._v(e._s(e.$t("domainTable.verifyNow")))])],1)],2),a("el-dialog",{attrs:{title:e.$t("domainTable.bindDomain"),visible:e.dialogVisible,width:"mobile"===e.device?"90%":"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"domainForm",attrs:{model:e.domainFormData,rules:e.domainRules}},[a("el-form-item",{attrs:{prop:"domain"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:e.$t("domainTable.bindDomainTip")},model:{value:e.domainFormData.domain,callback:function(t){e.$set(e.domainFormData,"domain",t)},expression:"domainFormData.domain"}}),a("br")],1),a("el-form-item",{attrs:{prop:"playUrl"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:e.$t("domainTable.playUrlTip")},model:{value:e.domainFormData.playUrl,callback:function(t){e.$set(e.domainFormData,"playUrl",t)},expression:"domainFormData.playUrl"}})],1)],1),a("div",{staticClass:"bind-warning",style:"mobile"===e.device?"padding: 0px 8px 5px;":"padding: 0px 20px 20px;"},[e._v(e._s(e.$t("domainTable.bindWarning")))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("common.cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:e.addDomainSubmit}},[e._v(e._s(e.$t("common.ok")))])],1)],1)],1)},l=[],c=a("8afe"),r=a("c93e"),s=a("a877"),d=a("01a5"),u=a("61f7"),m=a("ed08"),b=a("2f62"),f=a("4360"),h={name:"UserDomain",components:{SwitchDomain:d["a"]},data:function(){var e=this,t=function(t,a,i){if(Object(u["b"])(a))i();else{var n=e.$t("domainTable.bindDomainTError");i(new Error(n))}};return{loading:!1,tableData:[],tableParam:{page:1,pageSize:10},dialogVisible:!1,checkDialogVisible:!1,checkSelect:"dns",checkDomainLoading:!1,checkDomainData:{domain:"",text:"",id:0},domainFormData:{domain:"",playUrl:""},domainRules:{domain:[{required:!0,trigger:"blur",validator:t}],playUrl:[{required:!0,trigger:"blur"}]}}},computed:Object(r["a"])({},Object(b["b"])(["device"])),methods:{pClose:function(e){this.$refs["popover-"+e].doClose()},pShow:function(e){this.$refs["popover-"+e].doShow()},fetchTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tableParam.page,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableParam.pageSize;this.loading=!0,Object(s["i"])(t,a,{web:!0}).then(function(t){if(t.data){e.tableData=Object(c["a"])(t.data);var a=t.data.filter(function(e){return 1===e.isValid});f["a"].dispatch("setValidDomain",a)}e.loading=!1}).catch(function(t){e.loading=!1,console.log(t)})},handleSizeChange:function(e){this.tableParam.pageSize=e,this.fetchTableData()},handleCurrentChange:function(e){this.tableParam.page=e,this.fetchTableData()},handleCheck:function(e){this.checkDomainData=Object(r["a"])({},e),this.checkDialogVisible=!0},handleCheckDomain:function(){var e=this;this.checkDomainLoading=!0,Object(s["c"])(this.checkDomainData.id).then(function(t){e.fetchTableData(),e.$message({message:e.$t("domainTable.verifySuccess"),type:"success"}),e.checkDomainLoading=!1,e.checkDialogVisible=!1}).catch(function(t){e.checkDomainLoading=!1,console.log(t)})},handleDeleteDomain:function(e){var t=this;Object(s["d"])(e.id).then(function(a){t.$message({message:t.$t("common.deleteSuccess"),type:"success"}),t.tableData=t.tableData.filter(function(t){return t.id!==e.id}),t.pClose(e.id)}).catch(function(a){t.pClose(e.id),console.log(a)})},addDomainSubmit:function(){var e=this;this.$refs.domainForm.validate(function(t){if(!t)return!1;Object(s["a"])({domain:e.domainFormData.domain,play_url:e.domainFormData.playUrl}).then(function(t){e.dialogVisible=!1,e.tableData.push(t.data)}).catch(function(e){console.log(e)})})},formatterStatus:function(e){return e.blocked?this.$t("common.illegal"):e.reviewing?this.$t("common.reviewing"):0===e.isValid?this.$t("domainTable.unavailable"):this.$t("domainTable.available")},saveFile:function(){Object(m["c"])(this.checkDomainData.text,"auth.txt")}},mounted:function(){this.fetchTableData()}},p=h,v=(a("b50b"),a("2877")),g=Object(v["a"])(p,o,l,!1,null,"601eb67b",null);g.options.__file="DomainTable.vue";var D=g.exports,_={name:"Domain",components:{Table:D}},y=_,k=Object(v["a"])(y,i,n,!1,null,null,null);k.options.__file="bindDomain.vue";t["default"]=k.exports},ed08:function(e,t,a){"use strict";a.d(t,"b",function(){return i}),a.d(t,"c",function(){return n}),a.d(t,"d",function(){return o}),a.d(t,"a",function(){return l});a("a481");function i(e,t,a){var i,n,o,l,c,r=function r(){var s=+new Date-l;s<t&&s>0?i=setTimeout(r,t-s):(i=null,a||(c=e.apply(o,n),i||(o=n=null)))};return function(){for(var n=arguments.length,s=new Array(n),d=0;d<n;d++)s[d]=arguments[d];o=this,l=+new Date;var u=a&&!i;return i||(i=setTimeout(r,t)),u&&(c=e.apply(o,s),o=s=null),c}}function n(e,t){var a=document.createElement("a");a.download=t,a.style.display="none";var i=new Blob([e]);a.href=URL.createObjectURL(i),document.body.appendChild(a),a.click(),document.body.removeChild(a)}function o(e){return e.replace(/(^\s*)|(\s*$)/g,"")}function l(e,t){var a=document.activeElement,i=document.createElement("input");document.body.appendChild(i),i.style.opacity=0,i.value=e;var n=window.scrollY;i.focus(),i.setSelectionRange(0,i.value.length);var o=document.execCommand("copy",!0);return a.focus(),document.body.removeChild(i),window.scrollTo(0,n),t(),o}}}]);
//# sourceMappingURL=chunk-97ee.6172eb3e.js.map