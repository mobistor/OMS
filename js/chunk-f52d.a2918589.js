(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f52d"],{a877:function(e,t,n){"use strict";n.d(t,"h",function(){return c}),n.d(t,"f",function(){return o}),n.d(t,"g",function(){return r}),n.d(t,"b",function(){return l}),n.d(t,"m",function(){return s}),n.d(t,"k",function(){return u}),n.d(t,"l",function(){return d}),n.d(t,"j",function(){return f}),n.d(t,"i",function(){return h}),n.d(t,"a",function(){return g}),n.d(t,"c",function(){return b}),n.d(t,"d",function(){return m}),n.d(t,"e",function(){return p});n("7f7f"),n("ac6a"),n("cadf"),n("551c"),n("097d");var a=n("b775"),i=n("5f87");function c(){return Object(a["a"])({url:"host/num?ts=".concat(((new Date).getTime()/1e3).toFixed()-1800),method:"get"})}function o(e,t,n,i){var c="host?page=".concat(e,"&page_size=").concat(t,"&order=").concat(n);return i.forEach(function(e){e.value&&(c+="&".concat(e.name,"=").concat(e.value))}),Object(a["a"])({url:c,method:"get"})}function r(e,t){var n="host/review?page=".concat(e,"&page_size=").concat(t);return Object(a["a"])({url:n,method:"get"})}function l(e){return Object(a["a"])({url:"/host/block",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/host/whitelist",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/host/review",method:"post",data:e})}function d(e){return Object(a["a"])({url:"host/search?keywords=".concat(e),method:"get"})}function f(e,t,n){return Object(a["a"])({url:"user?page=".concat(e,"&page_size=").concat(t,"&order=").concat(n),method:"get"})}function h(e,t,n){var c="user/user_id/".concat(Object(i["a"])(),"/domain?page=").concat(e,"&page_size=").concat(t);for(var o in n)n[o]&&(c="".concat(c,"&").concat(o,"=1"));return Object(a["a"])({url:c,method:"get"})}function g(e){return Object(a["a"])({url:"user/user_id/".concat(Object(i["a"])(),"/domain"),method:"post",data:e})}function b(e){return Object(a["a"])({url:"user/user_id/".concat(Object(i["a"])(),"/domain/domain_id/").concat(e),method:"post"})}function m(e){return Object(a["a"])({url:"user/user_id/".concat(Object(i["a"])(),"/domain/domain_id/").concat(e),method:"delete"})}function p(){return Object(a["a"])({url:"user/admin",method:"get"})}},f4f2:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData}},[n("el-table-column",{attrs:{align:"center",label:"域名"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[n("a",{on:{click:function(n){e.hostClick(t.row.domain)}}},[e._v(e._s(t.row.domain))])])]}}])}),n("el-table-column",{attrs:{align:"center",label:"平台"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.native?"native":"web"))])]}}])}),n("el-table-column",{attrs:{align:"center",label:"未审核"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{attrs:{slot:"reference",value:t.row.reviewing,"active-color":"red"},on:{change:function(n){e.reviewingChange(t.row)}},slot:"reference"})]}}])}),n("el-table-column",{attrs:{align:"center",label:"黑名单"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{attrs:{slot:"reference",value:t.row.blocked,"active-color":"red"},on:{change:function(n){e.blacklistChange(t.row)}},slot:"reference"})]}}])}),n("el-table-column",{attrs:{align:"center",label:"白名单"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{attrs:{slot:"reference",value:t.row.whitelist,"active-color":"green"},on:{change:function(n){e.whiteListChange(t.row)}},slot:"reference"})]}}])}),n("el-table-column",{attrs:{align:"center",label:"联系方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.email))])]}}])}),n("el-table-column",{attrs:{label:"action",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){e.reviewClick(t.row.play_url)}}},[e._v("审核")]),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){e.beianClick(t.row.domain)}}},[e._v("备案")])]}}])})],1),n("div",{staticClass:"pagination-container"},[n("el-pagination",{attrs:{small:"mobile"===e.device,layout:"mobile"===e.device?"prev, pager, next":"sizes, prev, pager, next","page-sizes":[10,20,50,100],"page-size":e.tableParam.pageSize,"current-page":e.tableParam.page},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},i=[],c=(n("ac6a"),n("f559"),n("c93e")),o=(n("cadf"),n("551c"),n("097d"),n("a877")),r=n("2f62"),l=(n("5f87"),{data:function(){return{loading:!1,showValid:!0,showWhite:!1,showBlack:!1,showNative:!1,tableData:[],tableParam:{page:1,pageSize:10},searchValue:""}},computed:Object(c["a"])({},Object(r["b"])(["device"])),mounted:function(){this.fetchTableData()},methods:{hostClick:function(e){window.open("http://".concat(e)),window.open("https://".concat(e))},reviewClick:function(e){e.startsWith("http")||(e="http://"+e),window.open("".concat(e))},beianClick:function(e){window.open("".concat(e))},blacklistChange:function(e){var t=this;if(!e.whitelist||e.blocked){var n={domain:e.domain,blocked:!e.blocked};this.loading=!0,Object(o["b"])(n).then(function(n){t.tableData.forEach(function(t){t.id===e.id&&(t.blocked=!t.blocked)}),t.$message({message:e.blocked?"成功添加至黑名单":"已从黑名单中移除",type:"success"}),t.loading=!1}).catch(function(e){t.loading=!1})}else this.$message({message:"不能同时添加到白名单和黑名单",type:"error"})},whiteListChange:function(e){var t=this;if(e.whitelist||!e.blocked){var n={domain:e.domain,whitelist:!e.whitelist};this.loading=!0,Object(o["m"])(n).then(function(n){t.tableData.forEach(function(t){t.id===e.id&&(t.whitelist=!t.whitelist)}),t.$message({message:e.whitelist?"成功添加至白名单":"已从白名单中移除",type:"success"}),t.loading=!1}).catch(function(e){t.loading=!1})}else this.$message({message:"不能同时添加到白名单和黑名单",type:"error"})},reviewingChange:function(e){var t=this,n={domain:e.domain,reviewing:!e.reviewing};this.loading=!0,Object(o["k"])(n).then(function(n){t.tableData.forEach(function(t){t.id===e.id&&(t.reviewing=!t.reviewing)}),t.$message({message:e.reviewing?"正在审核":"已审核",type:"success"}),t.loading=!1}).catch(function(e){t.loading=!1})},formatData:function(e){return e.forEach(function(e){}),e},fetchTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tableParam.page,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableParam.pageSize;this.loading=!0,Object(o["g"])(t,n).then(function(t){e.loading=!1,e.tableData=e.formatData(t.data)}).catch(function(t){e.tableData=[],e.loading=!1})},handleSizeChange:function(e){this.tableParam.pageSize=e,this.fetchTableData()},handleCurrentChange:function(e){this.tableParam.page=e,this.fetchTableData()}}}),s=l,u=n("2877"),d=Object(u["a"])(s,a,i,!1,null,null,null);d.options.__file="reviewDomainList.vue";t["default"]=d.exports},f559:function(e,t,n){"use strict";var a=n("5ca1"),i=n("9def"),c=n("d2c8"),o="startsWith",r=""[o];a(a.P+a.F*n("5147")(o),"String",{startsWith:function(e){var t=c(this,e,o),n=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),a=String(e);return r?r.call(t,a,n):t.slice(n,n+a.length)===a}})}}]);
//# sourceMappingURL=chunk-f52d.a2918589.js.map