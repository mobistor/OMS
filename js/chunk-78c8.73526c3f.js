(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78c8"],{"3e56":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{attrs:{"body-style":{padding:"30px"}}},[a("Table")],1)},o=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,sm:12,lg:6}},[a("el-select",{staticClass:"filter-item",on:{change:t.selectChange},model:{value:t.selectValue,callback:function(e){t.selectValue=e},expression:"selectValue"}},t._l(t.selectOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),a("el-col",{attrs:{xs:8,sm:12,lg:2}},[a("el-checkbox",{on:{change:t.showValidChange},model:{value:t.showValid,callback:function(e){t.showValid=e},expression:"showValid"}},[t._v("显示已绑定")])],1),a("el-col",{attrs:{xs:8,sm:12,lg:2}},[a("el-checkbox",{attrs:{disabled:t.filters[1].value},on:{change:t.showWhitelistChange},model:{value:t.showWhite,callback:function(e){t.showWhite=e},expression:"showWhite"}},[t._v("显示白名单")])],1),a("el-col",{attrs:{xs:8,sm:12,lg:2}},[a("el-checkbox",{attrs:{disabled:t.filters[2].value},on:{change:t.showBlacklistChange},model:{value:t.showBlack,callback:function(e){t.showBlack=e},expression:"showBlack"}},[t._v("显示黑名单")])],1),a("el-col",{attrs:{xs:8,sm:12,lg:4}},[a("el-checkbox",{on:{change:t.showNativeChange},model:{value:t.showNative,callback:function(e){t.showNative=e},expression:"showNative"}},[t._v("显示Native SDK")])],1),a("el-col",{attrs:{xs:24,sm:12,lg:6}},[a("el-input",{staticClass:"filter-item",attrs:{"prefix-icon":"el-icon-search",placeholder:"请输入域名"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleSearch(e):null}},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}})],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData},on:{"filter-change":t.tableFilter}},[a("el-table-column",{attrs:{align:"center",label:"域名"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[a("a",{on:{click:function(a){t.hostClick(e.row.host)}}},[t._v(t._s(e.row.host))])])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"num",label:"人数"}}),a("el-table-column",{attrs:{align:"center",prop:"max_num",label:"最大人数"}}),a("el-table-column",{attrs:{align:"center",prop:"email",label:"邮箱"}}),a("el-table-column",{attrs:{align:"center",label:"是否绑定"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.isvalid?"已绑定":"未绑定"))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"黑名单"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{ref:"popover-"+e.row.host_id,attrs:{trigger:"manual",placement:"top",width:"160"}},[a("p",[t._v(t._s(e.row.blocked?"确认从黑名单中移除吗？":"确定加入黑名单吗？"))]),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){t.pClose(e.row.host_id)}}},[t._v(t._s(t.$t("common.cancel")))]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.blacklistChange(e.row)}}},[t._v(t._s(t.$t("common.ok")))])],1),a("el-switch",{attrs:{slot:"reference",value:e.row.blocked,"active-color":"red"},on:{change:function(a){t.pShow(e.row.host_id)}},slot:"reference"})],1)]}}])}),a("el-table-column",{attrs:{align:"center",label:"白名单"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{ref:"popover-"+e.row.host,attrs:{trigger:"manual",placement:"top",width:"160"}},[a("p",[t._v(t._s(e.row.whitelist?"确认从白名单中移除吗？":"确定加入白名单吗？"))]),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){t.pClose(e.row.host)}}},[t._v(t._s(t.$t("common.cancel")))]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.whiteListChange(e.row)}}},[t._v(t._s(t.$t("common.ok")))])],1),a("el-switch",{attrs:{slot:"reference",value:e.row.whitelist,"active-color":"green"},on:{change:function(a){t.pShow(e.row.host)}},slot:"reference"})],1)]}}])}),a("el-table-column",{attrs:{label:"action",align:"center","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.handleCheckDetail(e.row)}}},[t._v("详情")])]}}])})],1),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{small:"mobile"===t.device,layout:"mobile"===t.device?"prev, pager, next":"sizes, prev, pager, next","page-sizes":[10,20,50,100],"page-size":t.tableParam.pageSize,"current-page":t.tableParam.page},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},l=[],c=a("8afe"),s=(a("7f7f"),a("ac6a"),a("c93e")),r=(a("cadf"),a("551c"),a("097d"),a("a877")),u=a("2f62"),h=a("5f87"),d={data:function(){return{loading:!1,showValid:!0,showWhite:!1,showBlack:!1,showNative:!1,tableData:[],tableParam:{page:1,pageSize:10},filters:[{name:"isvalid",value:!0},{name:"blocked",value:!1},{name:"whitelist",value:!1},{name:"native",value:!1},{name:"agent"}],searchValue:"",selectValue:"num",selectOptions:[{label:"id",value:"id"},{label:"最大人数",value:"max_num"},{label:"人数",value:"num"},{label:"近一月p2p流量",value:"p2p_month"},{label:"近一月http流量",value:"http_month"}]}},computed:Object(s["a"])({},Object(u["b"])(["device"])),mounted:function(){this.fetchTableData()},methods:{pShow:function(t){this.$refs["popover-"+t].doShow()},pClose:function(t){this.$refs["popover-"+t].doClose()},hostClick:function(t){window.open("http://".concat(t)),window.open("https://".concat(t))},blacklistChange:function(t){var e=this;if(t.whitelist&&!t.blocked)return this.pClose(t.host_id),void this.$message({message:"不能同时添加到白名单和黑名单",type:"error"});var a={domain:t.host,blocked:!t.blocked};this.loading=!0,Object(r["b"])(a).then(function(a){e.pClose(t.host_id),e.tableData.forEach(function(e){e.host_id===t.host_id&&(e.blocked=!e.blocked)}),e.$message({message:t.blocked?"成功添加至黑名单":"已从黑名单中移除",type:"success"}),e.loading=!1}).catch(function(t){e.loading=!1})},whiteListChange:function(t){var e=this;if(!t.whitelist&&t.blocked)return this.pClose(t.host),void this.$message({message:"不能同时添加到白名单和黑名单",type:"error"});var a={domain:t.host,whitelist:!t.whitelist};this.loading=!0,Object(r["m"])(a).then(function(a){e.pClose(t.host),e.tableData.forEach(function(e){e.host_id===t.host_id&&(e.whitelist=!e.whitelist)}),e.$message({message:t.whitelist?"成功添加至白名单":"已从白名单中移除",type:"success"}),e.loading=!1}).catch(function(t){e.loading=!1})},tableFilter:function(t){t.agent.length>0?this.filters.forEach(function(e){"agent"===e.name&&(e.value=t.agent[0])}):this.filters.forEach(function(t){"agent"===t.name&&delete t.value}),this.fetchTableData()},showValidChange:function(t){this.filters.forEach(function(e){"isvalid"===e.name&&(e.value=t)}),this.fetchTableData()},showWhitelistChange:function(t){this.filters.forEach(function(e){"whitelist"===e.name&&(e.value=t)}),this.fetchTableData()},showBlacklistChange:function(t){this.filters.forEach(function(e){"blocked"===e.name&&(e.value=t)}),this.fetchTableData()},showNativeChange:function(t){this.filters.forEach(function(e){"native"===e.name&&(e.value=t)}),this.fetchTableData()},formatData:function(t){return t.forEach(function(t){t.p2p_month&&(t.p2p_month=(t.p2p_month/1024/1024).toFixed(2)),t.http_month&&(t.http_month=(t.http_month/1024/1024).toFixed(2)),t.p2p_rt&&(t.p2p_rt=(t.p2p_rt/1024).toFixed(2)),t.http_rt&&(t.http_rt=(t.http_rt/1024).toFixed(2)),t.agent||(t.agent="无")}),t},fetchTableData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tableParam.page,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableParam.pageSize,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.selectValue,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.filters;this.loading=!0,Object(r["f"])(e,a,n,o).then(function(e){t.loading=!1,t.tableData=t.formatData(e.data)}).catch(function(e){t.tableData=[],t.loading=!1})},handleSizeChange:function(t){this.tableParam.pageSize=t,this.fetchTableData()},handleCurrentChange:function(t){this.tableParam.page=t,this.fetchTableData()},selectChange:function(t){this.fetchTableData()},handleSearch:function(t){var e=this,a=t.target.value.trim();a?Object(r["l"])(a).then(function(t){e.showValid?e.tableData=t.data.filter(function(t){return t.isvalid}):e.tableData=Object(c["a"])(t.data)}):this.fetchTableData()},handleCheckDetail:function(t){this.$router.push({name:"UserLiveData",params:{uid:Object(h["a"])(),id:t.id,hostId:t.host_id}})}}},f=d,p=a("2877"),m=Object(p["a"])(f,i,l,!1,null,null,null);m.options.__file="DomainTable.vue";var b=m.exports,g={name:"UserData",components:{Table:b}},v=g,w=Object(p["a"])(v,n,o,!1,null,null,null);w.options.__file="index.vue";e["default"]=w.exports},a877:function(t,e,a){"use strict";a.d(e,"h",function(){return i}),a.d(e,"f",function(){return l}),a.d(e,"g",function(){return c}),a.d(e,"b",function(){return s}),a.d(e,"m",function(){return r}),a.d(e,"k",function(){return u}),a.d(e,"l",function(){return h}),a.d(e,"j",function(){return d}),a.d(e,"i",function(){return f}),a.d(e,"a",function(){return p}),a.d(e,"c",function(){return m}),a.d(e,"d",function(){return b}),a.d(e,"e",function(){return g});a("7f7f"),a("ac6a"),a("cadf"),a("551c"),a("097d");var n=a("b775"),o=a("5f87");function i(){return Object(n["a"])({url:"host/num?ts=".concat(((new Date).getTime()/1e3).toFixed()-1800),method:"get"})}function l(t,e,a,o){var i="host?page=".concat(t,"&page_size=").concat(e,"&order=").concat(a);return o.forEach(function(t){t.value&&(i+="&".concat(t.name,"=").concat(t.value))}),Object(n["a"])({url:i,method:"get"})}function c(t,e){var a="host/review?page=".concat(t,"&page_size=").concat(e);return Object(n["a"])({url:a,method:"get"})}function s(t){return Object(n["a"])({url:"/host/block",method:"post",data:t})}function r(t){return Object(n["a"])({url:"/host/whitelist",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/host/review",method:"post",data:t})}function h(t){return Object(n["a"])({url:"host/search?keywords=".concat(t),method:"get"})}function d(t,e,a){return Object(n["a"])({url:"user?page=".concat(t,"&page_size=").concat(e,"&order=").concat(a),method:"get"})}function f(t,e,a){var i="user/user_id/".concat(Object(o["a"])(),"/domain?page=").concat(t,"&page_size=").concat(e);for(var l in a)a[l]&&(i="".concat(i,"&").concat(l,"=1"));return Object(n["a"])({url:i,method:"get"})}function p(t){return Object(n["a"])({url:"user/user_id/".concat(Object(o["a"])(),"/domain"),method:"post",data:t})}function m(t){return Object(n["a"])({url:"user/user_id/".concat(Object(o["a"])(),"/domain/domain_id/").concat(t),method:"post"})}function b(t){return Object(n["a"])({url:"user/user_id/".concat(Object(o["a"])(),"/domain/domain_id/").concat(t),method:"delete"})}function g(){return Object(n["a"])({url:"user/admin",method:"get"})}}}]);
//# sourceMappingURL=chunk-78c8.73526c3f.js.map