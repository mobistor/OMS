{"version":3,"sources":["webpack:///./src/api/trackerConfig.js","webpack:///./src/views/trackerConfig/tracker.vue?a06c","webpack:///src/views/trackerConfig/tracker.vue","webpack:///./src/views/trackerConfig/tracker.vue?e5e9","webpack:///./src/views/trackerConfig/tracker.vue"],"names":["fetchTrackerConfig","Object","_utils_request__WEBPACK_IMPORTED_MODULE_3__","url","method","configTracker","data","fetchAnnounces","addAnnounce","removeAnnounce","render","_vm","this","_h","$createElement","_c","_self","attrs","body-style","device","padding","ref","model","configForm","label-width","label","max","show-input","on","change","numChange","value","callback","$$v","$set","expression","maxConnChange","minConnChange","min","intervalChange","active-color","inactive-color","shareOnlyChange","maxNodesChange","disabled","loading","buttonLoading","isChanged","type","nativeOn","click","$event","preventDefault","handleSubmit","_v","reset","staticRenderFns","trackervue_type_script_lang_js_","name","tempData","max_peer_num","max_peer_conn","min_peer_conn","report_interval","tracker_open","max_nodes","share_only","computed","objectSpread","vuex_esm","mounted","_this","trackerConfig","then","res","methods","_this2","$message","message","catch","err","console","log","trackerConfig_trackervue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"js/chunk-d37a.6f4b0373.js","sourcesContent":["import request from '@/utils/request'\n\n// 获取tracker配置\nexport function fetchTrackerConfig() {\n  return request({\n    url: 'tracker/config',\n    method: 'get',\n  })\n}\n\n// 修改tracker配置\nexport function configTracker(data) {\n  return request({\n    url: 'tracker/config',\n    method: 'post',\n    data\n  })\n}\n\n// 获取announce\nexport function fetchAnnounces() {\n    return request({\n        url: '/tracker/announces',\n        method: 'get',\n    })\n}\n\n// 增加announce\nexport function addAnnounce(data) {\n    return request({\n        url: '/tracker/announces',\n        method: 'post',\n        data\n    })\n}\n\n// 删除announce\nexport function removeAnnounce(data) {\n    return request({\n        url: '/tracker/announces',\n        method: 'delete',\n        data\n    })\n}\n\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-card',{attrs:{\"body-style\":_vm.device === 'mobile' ? {padding: '0'} : {padding: '50px'}}},[_c('el-form',{ref:\"configForm\",attrs:{\"model\":_vm.configForm,\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"返回节点数量\"}},[_c('el-slider',{attrs:{\"max\":50,\"show-input\":\"\"},on:{\"change\":_vm.numChange},model:{value:(_vm.configForm.max_peer_num),callback:function ($$v) {_vm.$set(_vm.configForm, \"max_peer_num\", $$v)},expression:\"configForm.max_peer_num\"}})],1),_c('el-form-item',{attrs:{\"label\":\"节点最大连接数\"}},[_c('el-slider',{attrs:{\"max\":50,\"show-input\":\"\"},on:{\"change\":_vm.maxConnChange},model:{value:(_vm.configForm.max_peer_conn),callback:function ($$v) {_vm.$set(_vm.configForm, \"max_peer_conn\", $$v)},expression:\"configForm.max_peer_conn\"}})],1),_c('el-form-item',{attrs:{\"label\":\"节点最小连接数\"}},[_c('el-slider',{attrs:{\"max\":15,\"show-input\":\"\"},on:{\"change\":_vm.minConnChange},model:{value:(_vm.configForm.min_peer_conn),callback:function ($$v) {_vm.$set(_vm.configForm, \"min_peer_conn\", $$v)},expression:\"configForm.min_peer_conn\"}})],1),_c('el-form-item',{attrs:{\"label\":\"上报时间间隔\"}},[_c('el-slider',{attrs:{\"min\":10,\"max\":120,\"show-input\":\"\"},on:{\"change\":_vm.intervalChange},model:{value:(_vm.configForm.report_interval),callback:function ($$v) {_vm.$set(_vm.configForm, \"report_interval\", $$v)},expression:\"configForm.report_interval\"}})],1),_c('el-form-item',{attrs:{\"label\":\"ShareOnly模式\"}},[_c('el-switch',{attrs:{\"active-color\":\"green\",\"inactive-color\":\"red\"},on:{\"change\":_vm.shareOnlyChange},model:{value:(_vm.configForm.share_only),callback:function ($$v) {_vm.$set(_vm.configForm, \"share_only\", $$v)},expression:\"configForm.share_only\"}})],1),_c('el-form-item',{attrs:{\"label\":\"同时在线节点数\"}},[_c('el-slider',{attrs:{\"min\":0,\"max\":2000000,\"show-input\":\"\"},on:{\"change\":_vm.maxNodesChange},model:{value:(_vm.configForm.max_nodes),callback:function ($$v) {_vm.$set(_vm.configForm, \"max_nodes\", $$v)},expression:\"configForm.max_nodes\"}})],1),_c('el-form-item',{attrs:{\"label\":\"服务状态\"}},[_c('el-switch',{attrs:{\"active-color\":\"green\",\"inactive-color\":\"red\",\"disabled\":true},model:{value:(_vm.configForm.tracker_open),callback:function ($$v) {_vm.$set(_vm.configForm, \"tracker_open\", $$v)},expression:\"configForm.tracker_open\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"loading\":_vm.buttonLoading,\"disabled\":!_vm.isChanged,\"type\":\"primary\"},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.handleSubmit($event)}}},[_vm._v(\"更改\")]),_c('el-button',{attrs:{\"type\":\"primary\"},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.reset($event)}}},[_vm._v(\"取消\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-card :body-style=\"device === 'mobile' ? {padding: '0'} : {padding: '50px'}\">\n    <el-form ref=\"configForm\" :model=\"configForm\" label-width=\"120px\">\n      <el-form-item label=\"返回节点数量\">\n        <el-slider v-model=\"configForm.max_peer_num\" :max=\"50\" @change=\"numChange\" show-input></el-slider>\n      </el-form-item>\n      <el-form-item label=\"节点最大连接数\">\n        <el-slider v-model=\"configForm.max_peer_conn\" :max=\"50\" @change=\"maxConnChange\" show-input></el-slider>\n      </el-form-item>\n      <el-form-item label=\"节点最小连接数\">\n        <el-slider v-model=\"configForm.min_peer_conn\" :max=\"15\" @change=\"minConnChange\" show-input></el-slider>\n      </el-form-item>\n      <el-form-item label=\"上报时间间隔\">\n        <el-slider v-model=\"configForm.report_interval\" :min=\"10\" :max=\"120\" @change=\"intervalChange\" show-input></el-slider>\n      </el-form-item>\n      <el-form-item label=\"ShareOnly模式\">\n        <el-switch v-model=\"configForm.share_only\" active-color=\"green\" inactive-color=\"red\" @change=\"shareOnlyChange\"></el-switch>\n      </el-form-item>\n      <el-form-item label=\"同时在线节点数\">\n        <el-slider v-model=\"configForm.max_nodes\" :min=\"0\" :max=\"2000000\" @change=\"maxNodesChange\" show-input></el-slider>\n      </el-form-item>\n      <el-form-item label=\"服务状态\">\n        <el-switch v-model=\"configForm.tracker_open\" active-color=\"green\" inactive-color=\"red\" :disabled=\"true\"></el-switch>\n      </el-form-item>\n      <el-form-item>\n        <el-button :loading=\"buttonLoading\" :disabled=\"!isChanged\" type=\"primary\" @click.native.prevent=\"handleSubmit\">更改</el-button>\n        <el-button type=\"primary\" @click.native.prevent=\"reset\">取消</el-button>\n      </el-form-item>\n    </el-form>\n  </el-card> \n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport { fetchTrackerConfig, configTracker } from '@/api/trackerConfig'\n\nexport default {\n  name: 'TrackerConfig',\n  data() {\n    return {\n      isChanged: false,\n      buttonLoading: false,\n      tempData: {},\n      configForm: {\n        max_peer_num: 0,\n        max_peer_conn: 0,\n        min_peer_conn: 0,\n        report_interval: 0,\n        tracker_open: false,\n        max_nodes: 0,\n        share_only: false,\n      }\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'device'\n    ])\n  },\n  mounted() {\n    fetchTrackerConfig().then(res => {\n      this.tempData = {...res.data}\n      this.configForm = {...res.data}\n    })\n  },\n  methods: {\n    handleSubmit() {\n      this.buttonLoading = true\n      configTracker(this.configForm).then(res => {\n        this.buttonLoading = false\n        this.isChanged = false\n        this.tempData = {...this.configForm}\n        this.$message({\n          message: '更改配置成功',\n          type: 'success'\n        })\n      }).catch(err => {\n        this.buttonLoading = false\n        console.log(err)\n      })\n    },\n    reset() {\n      this.isChanged = false\n      this.configForm = this.tempData\n    },\n    numChange() {\n      this.isChanged = true\n    },\n    maxConnChange() {\n      this.isChanged = true\n    },\n    minConnChange() {\n      this.isChanged = true\n    },\n    intervalChange() {\n      this.isChanged = true\n    },\n    maxNodesChange() {\n      this.isChanged = true\n    },\n    shareOnlyChange() {\n      this.isChanged = true\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tracker.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tracker.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./tracker.vue?vue&type=template&id=2e66bc52&\"\nimport script from \"./tracker.vue?vue&type=script&lang=js&\"\nexport * from \"./tracker.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"tracker.vue\"\nexport default component.exports"],"sourceRoot":""}