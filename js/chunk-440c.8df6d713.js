(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-440c"],{"1b59":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-row",{staticStyle:{margin:"20px 0"},attrs:{type:"flex",justify:"space-between",gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-select",{staticClass:"filter-item",staticStyle:{float:"left"},on:{change:e.selectChange},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},e._l(e.selectOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),n("el-col",{attrs:{span:12}},[n("el-checkbox",{on:{change:e.showAdminUser},model:{value:e.showAdmin,callback:function(t){e.showAdmin=t},expression:"showAdmin"}},[e._v("显示管理员")])],1),n("el-col",{attrs:{span:12}},[n("el-input",{staticClass:"filter-item",attrs:{"prefix-icon":"el-icon-search",placeholder:"请输入邮箱"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleSearch(t):null}},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1)],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData}},[n("el-table-column",{attrs:{align:"center",prop:"uid",label:"ID"}}),n("el-table-column",{attrs:{align:"center",prop:"username",label:"用户名"}}),n("el-table-column",{attrs:{align:"center",prop:"email",label:"邮箱"}}),n("el-table-column",{attrs:{align:"center",prop:"reg_date",label:"注册时间"}}),n("el-table-column",{attrs:{align:"center",prop:"checkin",label:"最近签到时间"}}),n("el-table-column",{attrs:{align:"center",prop:"domain",label:"域名"}}),n("el-table-column",{attrs:{align:"center",prop:"agent",label:"代理商"}}),n("el-table-column",{attrs:{align:"center",label:"禁用状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{ref:"popover-"+t.row.username,attrs:{trigger:"manual",placement:"top",width:"160"}},[n("p",[e._v(e._s(t.row.enable?"确认禁用该用户？":"取消禁用该用户？"))]),n("div",{staticStyle:{"text-align":"right",margin:"0"}},[n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){e.pClose(t.row.username)}}},[e._v(e._s(e.$t("common.cancel")))]),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){e.handleFrozenUser(t.row)}}},[e._v(e._s(e.$t("common.ok")))])],1),n("el-switch",{attrs:{slot:"reference",value:0===t.row.enable,"active-color":"red"},on:{change:function(n){e.pShow(t.row.username)}},slot:"reference"})],1)]}}])}),n("el-table-column",{attrs:{align:"center",label:"管理员权限"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{ref:"popover-"+t.row.uid,attrs:{trigger:"manual",placement:"top",width:"160"}},[n("p",[e._v(e._s(t.row.admin?"确认取消该用户的管理员权限吗？":"确定将该用户设置为管理员吗？"))]),n("div",{staticStyle:{"text-align":"right",margin:"0"}},[n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){e.pClose(t.row.uid)}}},[e._v(e._s(e.$t("common.cancel")))]),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){e.handleAdminUser(t.row)}}},[e._v(e._s(e.$t("common.ok")))])],1),n("el-switch",{attrs:{slot:"reference",value:t.row.admin,"active-color":"#42b983"},on:{change:function(n){e.pShow(t.row.uid)}},slot:"reference"})],1)]}}])}),n("el-table-column",{attrs:{align:"center",label:"流量更新(GB)"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-row",{attrs:{gutter:4}},[n("el-col",{attrs:{span:20}},[n("el-input",{model:{value:t.row.flow.remain,callback:function(n){e.$set(t.row.flow,"remain",n)},expression:"scope.row.flow.remain"}})],1),n("el-col",{attrs:{span:4}},[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.handleEditRemain(t.row)}}},[e._v("修改")])],1)],1)]}}])}),n("el-table-column",{attrs:{label:"passwd",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){e.copyPassword(t.row.raw_pass)}}},[e._v("Copy")])]}}])})],1),n("div",{staticClass:"pagination-container"},[n("el-pagination",{attrs:{layout:"sizes, prev, pager, next","page-sizes":[10,20,50,100],"page-size":e.tableParam.pageSize,"current-page":e.tableParam.page},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},o=[],c=(n("ac6a"),n("8afe")),r=(n("9e1f"),n("450d"),n("6ed5")),l=n.n(r),i=n("a877"),u=n("c24f"),s=n("ed08"),d=n("c1df"),f=n.n(d),m={data:function(){return{loading:!1,tableData:[],tableParam:{page:1,pageSize:10},showAdmin:!1,searchValue:"",selectValue:"uid",selectOptions:[{label:"ID",value:"uid"},{label:"邮箱",value:"email"},{label:"用户名",value:"username"},{label:"注册时间",value:"reg_date"},{label:"代理商",value:"agent"},{label:"域名",value:"domain"},{label:"禁用状态",value:"enable"}]}},mounted:function(){this.fetchTableData()},methods:{pShow:function(e){this.$refs["popover-"+e].doShow()},pClose:function(e){this.$refs["popover-"+e].doClose()},handleEditRemain:function(e){var t=this;l.a.confirm("更新流量至".concat(e.flow.remain,"GB吗？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){t.flowSubmit(e)})},flowSubmit:function(e){var t=this,n={uid:e.uid,remain_traffic:1024*e.flow.remain*1024};Object(u["g"])(n).then(function(e){0===e.ret&&(t.$message({type:"success",message:"操作成功"}),t.fetchTableData())})},showAdminUser:function(e){var t=this;this.loading=!0,e?Object(i["e"])().then(function(e){e.data&&(t.loading=!1,t.tableData=t.formatData(e.data))}).catch(function(e){t.loading=!1,t.tableData=[],console.log(e)}):this.fetchTableData()},formatData:function(e){var t=Object(c["a"])(e);return t.forEach(function(e){e.reg_date=f()(1e3*e.reg_date).format("YYYY-MM-DD HH:mm"),e.checkin=f()(e.checkin).format("YYYY-MM-DD HH:mm"),e.flow.remain=(e.flow.remain/1024/1024).toFixed(3)}),t},fetchTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tableParam.page,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableParam.pageSize,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.selectValue;this.loading=!0,Object(i["j"])(t,n,a).then(function(t){t.data&&(e.tableData=e.formatData(t.data)),e.loading=!1}).catch(function(t){e.tableData=[],e.loading=!1,console.log(t)})},handleFrozenUser:function(e){var t=this,n={uid:e.uid,frozen:!!e.enable};this.loading=!0,Object(u["e"])(n).then(function(a){t.pClose(e.username),t.loading=!1,t.$message({type:"success",message:"操作成功"}),t.tableData.forEach(function(e){e.uid===n.uid&&(e.enable=n.frozen?0:1)})}).catch(function(e){t.loading=!1,console.log(e)})},handleAdminUser:function(e){var t=this;this.loading=!0,Object(u["a"])({uid:e.uid,admin:!e.admin}).then(function(n){t.pClose(e.uid),t.loading=!1,t.$message({type:"success",message:"操作成功"}),t.tableData.forEach(function(t){t.uid===e.uid&&(t.admin=!t.admin)})}).catch(function(e){t.loading=!1,console.log(e)})},handleSearch:function(){var e=this;this.searchValue?Object(u["f"])(this.searchValue).then(function(t){e.tableData=e.formatData(t.data)}).catch(function(t){e.tableData=[],console.log(t)}):this.fetchTableData()},handleSizeChange:function(e){this.tableParam.pageSize=e,this.fetchTableData()},handleCurrentChange:function(e){this.tableParam.page=e,this.fetchTableData()},selectChange:function(){this.fetchTableData()},copyPassword:function(e){var t=this;Object(s["a"])(e,function(){t.$message.success("Copied(已复制)")})}}},h=m,p=n("2877"),b=Object(p["a"])(h,a,o,!1,null,null,null);b.options.__file="userList.vue";t["default"]=b.exports},a877:function(e,t,n){"use strict";n.d(t,"h",function(){return c}),n.d(t,"f",function(){return r}),n.d(t,"g",function(){return l}),n.d(t,"b",function(){return i}),n.d(t,"m",function(){return u}),n.d(t,"k",function(){return s}),n.d(t,"l",function(){return d}),n.d(t,"j",function(){return f}),n.d(t,"i",function(){return m}),n.d(t,"a",function(){return h}),n.d(t,"c",function(){return p}),n.d(t,"d",function(){return b}),n.d(t,"e",function(){return g});n("7f7f"),n("ac6a"),n("cadf"),n("551c"),n("097d");var a=n("b775"),o=n("5f87");function c(){return Object(a["a"])({url:"host/num?ts=".concat(((new Date).getTime()/1e3).toFixed()-1800),method:"get"})}function r(e,t,n,o){var c="host?page=".concat(e,"&page_size=").concat(t,"&order=").concat(n);return o.forEach(function(e){e.value&&(c+="&".concat(e.name,"=").concat(e.value))}),Object(a["a"])({url:c,method:"get"})}function l(e,t){var n="host/review?page=".concat(e,"&page_size=").concat(t);return Object(a["a"])({url:n,method:"get"})}function i(e){return Object(a["a"])({url:"/host/block",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/host/whitelist",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/host/review",method:"post",data:e})}function d(e){return Object(a["a"])({url:"host/search?keywords=".concat(e),method:"get"})}function f(e,t,n){return Object(a["a"])({url:"user?page=".concat(e,"&page_size=").concat(t,"&order=").concat(n),method:"get"})}function m(e,t,n){var c="user/user_id/".concat(Object(o["a"])(),"/domain?page=").concat(e,"&page_size=").concat(t);for(var r in n)n[r]&&(c="".concat(c,"&").concat(r,"=1"));return Object(a["a"])({url:c,method:"get"})}function h(e){return Object(a["a"])({url:"user/user_id/".concat(Object(o["a"])(),"/domain"),method:"post",data:e})}function p(e){return Object(a["a"])({url:"user/user_id/".concat(Object(o["a"])(),"/domain/domain_id/").concat(e),method:"post"})}function b(e){return Object(a["a"])({url:"user/user_id/".concat(Object(o["a"])(),"/domain/domain_id/").concat(e),method:"delete"})}function g(){return Object(a["a"])({url:"user/admin",method:"get"})}},c24f:function(e,t,n){"use strict";n.d(t,"d",function(){return c}),n.d(t,"c",function(){return r}),n.d(t,"b",function(){return l}),n.d(t,"e",function(){return i}),n.d(t,"a",function(){return u}),n.d(t,"f",function(){return s}),n.d(t,"g",function(){return d});n("cadf"),n("551c"),n("097d");var a=n("b775"),o=n("5f87");function c(){return Object(a["a"])({url:"user/user_id/".concat(Object(o["a"])(),"/profile"),method:"get"})}function r(e){return Object(a["a"])({url:"user/user_id/".concat(Object(o["a"])(),"/profile/passwd"),method:"put",data:e})}function l(e){return Object(a["a"])({url:"user/user_id/".concat(Object(o["a"])(),"/profile/email"),method:"put",data:e})}function i(e){return Object(a["a"])({url:"user/frozen",method:"post",data:e})}function u(e){return Object(a["a"])({url:"user/admin",method:"post",data:e})}function s(e){return Object(a["a"])({url:"user/search?keywords=".concat(e),method:"get"})}function d(e){return Object(a["a"])({url:"user/remain_traffic",method:"post",data:e})}},ed08:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return c}),n.d(t,"a",function(){return r});n("a481");function a(e,t,n){var a,o,c,r,l,i=function i(){var u=+new Date-r;u<t&&u>0?a=setTimeout(i,t-u):(a=null,n||(l=e.apply(c,o),a||(c=o=null)))};return function(){for(var o=arguments.length,u=new Array(o),s=0;s<o;s++)u[s]=arguments[s];c=this,r=+new Date;var d=n&&!a;return a||(a=setTimeout(i,t)),d&&(l=e.apply(c,u),c=u=null),l}}function o(e,t){var n=document.createElement("a");n.download=t,n.style.display="none";var a=new Blob([e]);n.href=URL.createObjectURL(a),document.body.appendChild(n),n.click(),document.body.removeChild(n)}function c(e){return e.replace(/(^\s*)|(\s*$)/g,"")}function r(e,t){var n=document.activeElement,a=document.createElement("input");document.body.appendChild(a),a.style.opacity=0,a.value=e;var o=window.scrollY;a.focus(),a.setSelectionRange(0,a.value.length);var c=document.execCommand("copy",!0);return n.focus(),document.body.removeChild(a),window.scrollTo(0,o),t(),c}}}]);
//# sourceMappingURL=chunk-440c.8df6d713.js.map